#
# Copyright (C) 2017-2019 Dremio Corporation. This file is confidential and private property.
#

suite: Dremio EE Helm Chart.License Tests
templates:
  - dremio-license-secret.yaml
tests:
  - it: should default to an empty string
    set:
      distStorage:
        type: gcp
        gcp:
          bucketName: test-bucket
          authentication: auto
          credentials:
            clientEmail: test@example.com
            privateKey: test-private-key
    asserts:
      - equal:
          path: stringData.license
          value: ""
  - it: should configure the license
    set:
      distStorage:
        type: gcp
        gcp:
          bucketName: test-bucket
          authentication: auto
          credentials:
            clientEmail: test@example.com
            privateKey: test-private-key
      dremio:
        license: test
    asserts:
      - equal:
          path: stringData.license
          value: test
